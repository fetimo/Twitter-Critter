<div id="content">
<?r unless @critter.nil? ?>
	<canvas id="your-critter" width="400" height="370"></canvas>
	<?r unless session[:access_token] ?>
	<form method="post" action="/evolve">
		<button>Adopt &amp; Evolve</button>
	</form>
	<?r end ?>
</div>
	<?r if session[:access_token] and @username == session[:access_token].params[:screen_name] ?>
	<section class="friends" id="carousel_container">	
		<div id="left_scroll"><img src="../images/back.png" alt="Backwards"></div>
		<div id="carousel_inner">  
        	<ul> 
				<?r session[:friends].each do |f| #from http://blog.xambr.com/2009/11/26/ramaze-partials-with-etanni/ ?>
			    	#{ render_partial :friend, { :friend=>f } }
				<?r end ?>
			</ul>
		</div>
		<div id='right_scroll'><img src="../images/next.png" alt="Forwards"></div>
	</section>
	<?r end ?>
<footer>
	<p>Critter is a fun and simple way to bring your tweets to life.</p>
	<p class="copyright">&copy; 2012 Tim Stone.  A degree project submitted in partial fulfilment of the requirements for the degree of Batchelor of the Arts in Interactive Media Production at Bournemouth University.</p>
</footer>
#{js('easel/lib/easel')}
<!--#{js('critter')}-->
<!-- load libraries -->
#{js('jquery')}
#{js('underscore')}
#{js('backbone')}
#{js('carousel')}
<script>
/*
	Setup Critter model, url defaults to the username requested
*/
var Critter = Backbone.Model.extend({
	url: '../critters/#{@username}',
	initialize: function () {
		this.fetch();
	}
});
</script>
#{js('your-critter')}

<?r else ?>
<p>No Critter called #{@username} exists yet! You can <a href="/">give life to it though</a>.</p>
<?r end ?>